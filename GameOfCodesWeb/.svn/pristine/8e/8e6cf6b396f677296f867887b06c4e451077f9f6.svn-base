package com.misys.gameofcodes.api;

import java.util.Set;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import com.misys.gameofcodes.connection.MongoClientProvider;
import com.misys.gameofcodes.service.HeroService;
import com.mongodb.DB;
import com.mongodb.MongoClient;

@Path("/what")  
public class Hello {
  // This method is called if HTML and XML is not requested  
  @GET  
  @Produces(MediaType.TEXT_PLAIN)  
  public String sayPlainTextHello() {  
    return "Hello Jersey Plain";  
  }  
  // This method is called if XML is requested  
  @GET  
  @Produces(MediaType.TEXT_XML)  
  public String sayXMLHello() {  
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";  
  }  
  
  // This method is called if HTML is requested  
  @GET  
  @Produces(MediaType.TEXT_HTML)  
  public String sayHtmlHello() {  
	  
	  
      	MongoClient mongoClient = MongoClientProvider.getMongoClient();
		DB db = mongoClient.getDB("GameOfCodes");
		Set<String> colls = db.getCollectionNames();
		
		StringBuilder sb = new StringBuilder();
		sb.append("<html> " + "<title>" + "Hello Jersey" + "</title>"  
		        + "<body><h1>");
		
		for (String s : colls) {
		    System.out.println(s);
			sb.append(s + "\n");
		}		
		
		sb.append("</h1></body>" + "</html> ");
		
    return  sb.toString();  
  }   
}  